#!/usr/bin/env ruby
$-w = true
$:.unshift(File.dirname(__FILE__)+"/../lib/")

require "string_additions"
require "sources_info"
require "comparator"

if ARGV.size != 2
  $stderr.puts "Usage: ProcessSources <Distro1> <Distro2>"
  exit(1)
end

s1 = SourcesInfo.new(ARGV[0])
s2 = SourcesInfo.new(ARGV[1])

bin = "nautilus"
pkg1 = s1.bin_to_package(bin)
pkg2 = s2.bin_to_package(bin)

if pkg1 != pkg2
  $stderr.write "Error: source packages for #{bin} differ (#{pkg1} vs #{pkg2})"
  exit 1
end

Comparator.compare(pkg1, s1, s2)
